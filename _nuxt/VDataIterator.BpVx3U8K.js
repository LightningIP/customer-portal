import{f as z,g as H,h as J,m as K,e as Q,i as X,n as Y,k as Z,l as _,p as $,o as ee,q as te,r as ae,s as re,t as se,v as oe,w as ne,x as ue}from"./filter.CQobfN2u.js";import{n as y,x as l,T as f,q as le,s as me,U as ie,b as ce}from"./entry.BOBPfMFk.js";import{d as de,f as ge,u as pe}from"./VImg.780dCUd8.js";const Pe=y({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function ve(e,a){const t=e.returnObject?a:f(a,e.itemValue),r=f(a,e.itemSelectable,!0);return{type:"item",value:t,selectable:r,raw:a}}function Ie(e,a){const t=[];for(const r of a)t.push(ve(e,r));return t}function fe(e){return{items:l(()=>Ie(e,e.items))}}const ye=y({search:String,loading:Boolean,...de(),...Pe(),...z(),...H(),...J({itemsPerPage:5}),...K(),...Q(),...X(),...ge()},"VDataIterator"),be=le()({name:"VDataIterator",props:ye(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,a){let{slots:t}=a;const r=me(e,"groupBy"),c=ie(e,"search"),{items:d}=fe(e),{filteredItems:S}=Y(e,d,c,{transform:u=>u.raw}),{sortBy:s,multiSort:x,mustSort:D}=Z(e),{page:o,itemsPerPage:n}=_(e),{toggleSort:b}=$({sortBy:s,multiSort:x,mustSort:D,page:o}),{sortByWithGroups:h,opened:k,extractRows:B,isGroupOpen:V,toggleGroup:G}=ee({groupBy:r,sortBy:s}),{sortedItems:T}=te(e,S,h),{flatItems:g}=ae(T,r,k),F=l(()=>g.value.length),{startIndex:w,stopIndex:A,pageCount:C,prevPage:E,nextPage:O,setItemsPerPage:R,setPage:j}=re({page:o,itemsPerPage:n,itemsLength:F}),{paginatedItems:m}=se({items:g,startIndex:w,stopIndex:A,itemsPerPage:n}),p=l(()=>B(m.value)),{isSelected:q,select:W,selectAll:L,toggleSelect:M}=oe(e,{allItems:d,currentPage:p}),{isExpanded:N,toggleExpand:U}=ne(e);ue({page:o,itemsPerPage:n,sortBy:s,groupBy:r,search:c});const i=l(()=>({page:o.value,itemsPerPage:n.value,sortBy:s.value,pageCount:C.value,toggleSort:b,prevPage:E,nextPage:O,setPage:j,setItemsPerPage:R,isSelected:q,select:W,selectAll:L,toggleSelect:M,isExpanded:N,toggleExpand:U,isGroupOpen:V,toggleGroup:G,items:p.value,groupedItems:m.value}));return pe(()=>ce(e.tag,{class:["v-data-iterator",e.class],style:e.style},{default:()=>{var u,P,v,I;return[(u=t.header)==null?void 0:u.call(t,i.value),m.value.length?(v=t.default)==null?void 0:v.call(t,i.value):(P=t["no-data"])==null?void 0:P.call(t),(I=t.footer)==null?void 0:I.call(t,i.value)]}})),{}}});export{be as V};
