import{u as A}from"./asyncData.BgXEAR5X.js";import{f as I,r as f,i as q,h as D,x as b,y as Q,o as u,c as R,b as e,k as l,n as k,l as _,w as t,d as x,m as w,al as z,Q as F,am as G,a as K,_ as N}from"./entry.SIUp9reF.js";import{V as X}from"./VAutocomplete.Cg_MlNHr.js";import{V as y,a as P,d as T,c as B,b as U}from"./VRow.g595Nkhj.js";import{n as E}from"./VImg.C7G75g1_.js";import{V as H,a as J}from"./VRadioGroup.BKWjiwCW.js";import{V as W}from"./VDataIterator.DpUqb3EB.js";import{V as Y}from"./VSelect.kYmte2xS.js";import{_ as Z}from"./Result.Chev3go-.js";import{V as ee}from"./VSheet.gb-fjGy1.js";import{V as te}from"./VBtn.B9kOMu1m.js";import{V as ae}from"./VContainer.BpQ8_q0H.js";import"./filter.CGUnb9Lx.js";import"./form.ChBs7JeA.js";import"./forwardRefs.C-GTDzx5.js";import"./VMenu.W11Pdke7.js";import"./index.CqBUh9nA.js";import"./VAvatar.C6fgBJJk.js";import"./VChip.CXGDWW6y.js";/* empty css              */import"./VAlert.C92k9yIl.js";import"./VTable.Cs42mpsc.js";const le=K("h3",{class:"pb-2"},"Enter your address to get started",-1),re=I({__name:"Search",emits:["locid"],async setup(O,{emit:m}){let i,n;const h=/^LOC\d{12}$/,V=/^LOC\d{0,12}/,C=m,s=f(null),{data:r,pending:v,error:$,refresh:L}=([i,n]=q(()=>A(()=>s.value?D().nbn.searchAddress(s.value):Promise.reject(new Error("locid is required")),{watch:[s]},"$ngTKxDQX5P")),i=await i,n(),i);b(r,()=>{r.value&&r.value.length==1&&(c.value=r.value[0].id)});const c=f(null);b(c,a=>{a&&h.test(a)&&C("locid",a)});const g=f(1);f([]);const o=f(""),j=Q(()=>{const a=[];return h.test(o.value)?(a.push({title:o.value,value:o.value,props:{prependIcon:"mdi-home-search-outline"}}),a):(V.test(o.value)||o.value&&o.value.length>5&&!V.test(o.value)&&a.push({title:o.value.replace("Search for: ",""),value:o.value,props:{prependIcon:"mdi-magnify"}}),a)});b(s,a=>{a&&(g.value=1)});function M(a){if(h.test(a)){o.value=a;return}a&&(o.value=a)}return(a,p)=>(u(),R("div",null,[le,e(X,{placeholder:"Search for address...","persistent-placeholder":"","append-inner-icon":"mdi-locate","menu-icon":"",class:"flex-full-width mx-1 mx-sm-0",density:"comfortable",modelValue:l(s),"onUpdate:modelValue":p[0]||(p[0]=d=>k(s)?s.value=d:null),items:l(j),"auto-select-first":"","hide-no-data":"",theme:"light",variant:"solo","no-filter":"","onUpdate:search":M},null,8,["modelValue","items"]),l(v)?(u(),_(P,{key:0,class:"fill-height mb-4","align-content":"center",justify:"center"},{default:t(()=>[e(y,{cols:"12",class:"text-subtitle-1 text-center"},{default:t(()=>[x(" Searching for a matching address ")]),_:1}),e(y,{cols:"6"},{default:t(()=>[e(E,{indeterminate:"",color:"purple",height:"6"})]),_:1})]),_:1})):w("",!0),l(r)&&l(r).length>1?(u(),_(U,{key:1},{default:t(()=>[e(T,null,{default:t(()=>[x(" Select Address: ")]),_:1}),e(B,null,{default:t(()=>[e(H,{modelValue:l(c),"onUpdate:modelValue":p[2]||(p[2]=d=>k(c)?c.value=d:null)},{default:t(()=>[e(W,{items:l(r),page:l(g)},z({default:t(({items:d})=>[(u(!0),R(F,null,G(d,(S,se)=>(u(),_(J,{key:S.value,label:S.raw.fullAddress,value:S.raw.id},null,8,["label","value"]))),128))]),_:2},[l(r).length>5?{name:"footer",fn:t(()=>[e(Y,{modelValue:l(g),"onUpdate:modelValue":p[1]||(p[1]=d=>k(g)?g.value=d:null),length:Math.ceil(l(r).length/5)},null,8,["modelValue","length"])]),key:"0"}:void 0]),1032,["items","page"])]),_:1},8,["modelValue"])]),_:1})]),_:1})):w("",!0)]))}}),oe=N(re,[["__file","Search.vue"]]),ne=I({__name:"search",async setup(O){let m,i;const n=f(null);function h(v){console.log(v),n.value=v}const{data:V,pending:C,error:s,refresh:r}=([m,i]=q(()=>A(()=>!n.value||n.value===null?Promise.reject(new Error("locid is required")):D().nbn.getLocation(n.value),{watch:[n]},"$zevvVqqMDV")),m=await m,i(),m);return(v,$)=>{const L=oe,c=Z;return u(),_(ae,null,{default:t(()=>[e(P,null,{default:t(()=>[e(y,{cols:"8"},{default:t(()=>[e(U,null,{default:t(()=>[e(T,null,{default:t(()=>[x("nbn Co Location Search")]),_:1}),e(B,null,{default:t(()=>[e(L,{onLocid:h})]),_:1})]),_:1}),l(C)?(u(),_(E,{key:0,indeterminate:"",color:"purple",class:"my-4"})):l(V)?(u(),_(ee,{key:1,class:"mt-5"},{default:t(()=>[e(c,{location:l(V)},null,8,["location"])]),_:1})):w("",!0)]),_:1}),e(y,null,{default:t(()=>[e(te,{onClick:l(r),color:"primary",dark:""},{default:t(()=>[x("Refresh")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}}}),Ie=N(ne,[["__file","search.vue"]]);export{Ie as default};
